<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <title>MedCore AI - Virtual Medical Analysis Platform</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="animated-bg"></div>
    <div class="app-container">

        <div id="authView" class="auth-section">
            <div class="auth-card">
                <div id="loginForm">
                    <h2>Welcome to MedCore AI</h2>
                    <p>Advanced AI-powered medical analysis platform. Sign in to start your consultation.</p>
                    <div id="loginError" class="error-msg hidden"></div>
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="loginUsername" class="form-input" placeholder="Enter your username" autocomplete="username">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password" autocomplete="current-password">
                    </div>
                    <button class="btn btn-primary" style="width:100%;padding:12px;margin-top:8px;" onclick="handleLogin()">Sign In</button>
                    <div class="auth-switch">
                        New to MedCore AI? <a onclick="showRegister()">Create an account</a>
                    </div>
                </div>
                <div id="registerForm" class="hidden">
                    <h2>Create Your Account</h2>
                    <p>Join MedCore AI for intelligent medical consultations powered by machine learning.</p>
                    <div id="registerError" class="error-msg hidden"></div>
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="regUsername" class="form-input" placeholder="Choose a username" autocomplete="username">
                    </div>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="regEmail" class="form-input" placeholder="Enter your email" autocomplete="email">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="regPassword" class="form-input" placeholder="Create a password (min 6 chars)" autocomplete="new-password">
                    </div>
                    <button class="btn btn-primary" style="width:100%;padding:12px;margin-top:8px;" onclick="handleRegister()">Create Account</button>
                    <div class="auth-switch">
                        Already have an account? <a onclick="showLogin()">Sign in</a>
                    </div>
                </div>
            </div>
        </div>

        <div id="mainApp" class="hidden">
            <div class="top-bar">
                <div class="logo">
                    <div class="logo-icon">M</div>
                    <div class="logo-text">MedCore <span>AI</span></div>
                </div>
                <div class="top-bar-actions">
                    <div id="modelStatus" class="status-badge status-training">
                        <div class="status-dot"></div>
                        <span>Initializing</span>
                    </div>
                    <span id="usernameDisplay" style="font-size:0.85rem;color:var(--text-secondary);font-weight:600;"></span>
                    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">&#9681;</button>
                    <button class="btn btn-ghost btn-sm" onclick="handleLogout()">Sign Out</button>
                </div>
            </div>

            <div class="main-layout">
                <div class="sidebar" id="sidebar">
                    <div class="sidebar-section">
                        <h3>Themes</h3>
                        <div class="theme-switcher">
                            <div class="theme-opt dark active" onclick="setTheme('dark')" title="Deep Dark"></div>
                            <div class="theme-opt blue" onclick="setTheme('blue')" title="Classic Blue"></div>
                            <div class="theme-opt green" onclick="setTheme('green')" title="Medical Green"></div>
                            <div class="theme-opt purple" onclick="setTheme('purple')" title="Royal Purple"></div>
                        </div>
                        <h3>Navigation</h3>
                        <div class="nav-item active" onclick="switchView('chat')" data-view="chat">
                            <span class="nav-icon">&#9677;</span> New Consultation
                        </div>
                        <div class="nav-item" onclick="switchView('history')" data-view="history">
                            <span class="nav-icon">&#9776;</span> Consultation History
                        </div>
                    </div>

                    <div class="sidebar-section">
                        <h3>Select Symptoms</h3>
                        <input type="text" class="symptom-search" id="symptomSearch" placeholder="Search symptoms..." oninput="filterSymptoms()">
                        <div class="symptom-tags" id="symptomTags"></div>
                        <div class="selected-symptoms" id="selectedSymptoms"></div>
                    </div>

                    <div class="sidebar-section">
                        <h3>Pre-existing Conditions</h3>
                        <textarea class="conditions-input" id="conditionsInput" rows="2" placeholder="e.g., Diabetes, Hypertension"></textarea>
                    </div>

                    <div class="sidebar-footer">
                        MedCore AI v1.0 | For informational purposes only
                    </div>
                </div>

                <div class="chat-area">
                    <div class="view-chat active" id="chatView">
                        <div class="chat-header">
                            <div class="chat-header-info">
                                <h2>AI Medical Consultation</h2>
                                <p>Describe your symptoms for an AI-powered analysis</p>
                            </div>
                            <button class="btn btn-ghost btn-sm" onclick="clearChat()">Clear Chat</button>
                        </div>

                        <div class="chat-messages" id="chatMessages">
                            <div class="welcome-message" id="welcomeMsg">
                                <h2>Start Your Medical Consultation</h2>
                                <p>Select symptoms from the sidebar, fill in your details below, and describe how you are feeling. Our ML engine will analyze your input against real medical data.</p>
                                <div class="quick-actions">
                                    <div class="quick-action" onclick="quickSymptom('fever, headache, fatigue')">Fever + Headache + Fatigue</div>
                                    <div class="quick-action" onclick="quickSymptom('chest pain, shortness of breath')">Chest Pain + Breathing Issues</div>
                                    <div class="quick-action" onclick="quickSymptom('cough, sore throat, congestion')">Cold / Flu Symptoms</div>
                                    <div class="quick-action" onclick="quickSymptom('abdominal pain, nausea, diarrhea')">Digestive Issues</div>
                                    <div class="quick-action" onclick="quickSymptom('joint pain, muscle pain, fatigue')">Joint / Muscle Pain</div>
                                </div>
                            </div>
                        </div>

                        <div class="typing-indicator" id="typingIndicator">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>

                        <div class="chat-input-area">
                            <div class="input-row">
                                <div class="chat-input-wrapper">
                                    <input type="text" class="chat-input" id="chatInput" placeholder="Describe your symptoms or concerns..." onkeydown="if(event.key==='Enter')sendMessage()">
                                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">&#10148;</button>
                                </div>
                            </div>
                            <div class="input-extras">
                                <input type="number" class="extra-input" id="ageInput" placeholder="Age" min="1" max="120" value="30">
                                <select class="extra-select" id="genderInput">
                                    <option value="unknown">Gender</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                                <select class="extra-select" id="consultationType">
                                    <option value="general">General</option>
                                    <option value="follow-up">Follow-up</option>
                                    <option value="urgent">Urgent</option>
                                    <option value="specialist">Specialist</option>
                                </select>
                                <input type="text" class="extra-input" id="vitalsInput" placeholder="BP / Temp" style="width:120px;">
                            </div>
                        </div>
                    </div>

                    <div class="view-history" id="historyView">
                        <div class="history-view">
                            <h2>Consultation History</h2>
                            <div id="historyList"></div>
                        </div>
                    </div>
                </div>

                <div class="right-panel" id="rightPanel">
                    <div id="emergencyBanner" class="emergency-banner">
                        EMERGENCY ALERT: Severe symptoms detected. Seek immediate medical attention.
                    </div>

                    <div class="panel-card">
                        <h3>Risk Assessment</h3>
                        <div class="risk-meter">
                            <div class="risk-bar-container">
                                <div class="risk-bar" id="riskBar"></div>
                            </div>
                            <div class="risk-label" id="riskLabel">--</div>
                        </div>
                    </div>

                    <div class="panel-card">
                        <h3>Key Metrics</h3>
                        <div class="stat-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="severityValue">--</div>
                                <div class="stat-label">Severity</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="confidenceValue">--</div>
                                <div class="stat-label">Confidence</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="clusterValue">--</div>
                                <div class="stat-label">Cluster ID</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="symptomsCount">0</div>
                                <div class="stat-label">Symptoms</div>
                            </div>
                        </div>
                    </div>

                    <div class="panel-card">
                        <h3>Probable Conditions</h3>
                        <ul class="disease-list" id="diseaseList">
                            <li class="disease-item" style="color:var(--text-muted);font-size:0.82rem;">No analysis yet</li>
                        </ul>
                    </div>

                    <div class="panel-card">
                        <h3>Advisory</h3>
                        <div class="advisory-box advisory-selfcare" id="advisoryBox">
                            Submit your symptoms to receive an AI-generated medical advisory.
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <button class="mobile-toggle" id="mobileToggle" onclick="toggleSidebar()">&#9776;</button>
    <button class="panel-toggle" id="panelToggle" onclick="togglePanel()">&#9638;</button>

    <script src="/script.js"></script>
</body>
</html>
